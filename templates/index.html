{% extends "base.html" %}

{% block title %}–ì–æ–ª–æ–≤–Ω–∞ - –®–∫—ñ–ª—å–Ω–∏–π —Ä–æ–∑–∫–ª–∞–¥{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h2>üè´ –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ —Å–∏—Å—Ç–µ–º–∏ —à–∫—ñ–ª—å–Ω–æ–≥–æ —Ä–æ–∑–∫–ª–∞–¥—É!</h2>
            </div>
            <div class="card-body">
                {% if session.user_id %}
                    <h4>–ü—Ä–∏–≤—ñ—Ç, {{ session.username }}! üëã</h4>
                    <p class="lead">–í–∞—à–∞ —Ä–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º—ñ: <span class="badge bg-primary">{{ session.role }}</span></p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <h5 class="card-title">üìÖ –†–æ–∑–∫–ª–∞–¥</h5>
                                    <p class="card-text">–ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Ä–æ–∑–∫–ª–∞–¥ —É—Ä–æ–∫—ñ–≤ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å</p>
                                    <a href="{{ url_for('schedule') }}" class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Ä–æ–∑–∫–ª–∞–¥—É</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <h5 class="card-title">üìù –ó–∞–≤–¥–∞–Ω–Ω—è</h5>
                                    <p class="card-text">–ö–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º–∏ –Ω–∞–≤—á–∞–ª—å–Ω–∏–º–∏ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏</p>
                                    <a href="{{ url_for('tasks') }}" class="btn btn-success">–ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {% if session.role in ['admin', 'teacher'] %}
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card bg-warning text-dark">
                                <div class="card-body text-center">
                                    <h5 class="card-title">üë®‚Äçüè´ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è</h5>
                                    <p class="card-text">–î–æ–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ñ —É—Ä–æ–∫–∏ –¥–æ —Ä–æ–∑–∫–ª–∞–¥—É</p>
                                    <a href="{{ url_for('add_lesson') }}" class="btn btn-dark">–î–æ–¥–∞—Ç–∏ —É—Ä–æ–∫</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                {% else %}
                    <h4>üîê –ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É</h4>
                    <p class="lead">–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Ä–æ–∑–∫–ª–∞–¥—É —Ç–∞ –∑–∞–≤–¥–∞–Ω—å, –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –∞–±–æ —É–≤—ñ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É.</p>
                    
                    <div class="d-flex gap-3">
                        <a href="{{ url_for('login') }}" class="btn btn-primary btn-lg">üîë –í—Ö—ñ–¥</a>
                        <a href="{{ url_for('register') }}" class="btn btn-outline-primary btn-lg">üìù –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>
                    </div>
                    
                    <div class="mt-4">
                        <h5>üß† –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤—Å—ñ–º</h5>
                        <p>–í–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –Ω–∞–≤—ñ—Ç—å –±–µ–∑ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó!</p>
                        <a href="{{ url_for('test') }}" class="btn btn-info">–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">

        <div class="card">
            <div class="card-header">
                <h5>üå§Ô∏è –ü–æ–≥–æ–¥–∞</h5>
            </div>
            <div class="card-body">
                {% if weather %}
                    <div class="text-center">
                        <h4>{{ weather.name }}</h4>
                        <div class="weather-icon">
                            <img src="http://openweathermap.org/img/w/{{ weather.weather[0].icon }}.png" 
                                 alt="{{ weather.weather[0].description }}" class="img-fluid">
                        </div>
                        <h3 class="text-primary">{{ weather.main.temp|round|int }}¬∞C</h3>
                        <p class="mb-1">{{ weather.weather[0].description|title }}</p>
                        <small class="text-muted">
                            –í—ñ–¥—á—É–≤–∞—î—Ç—å—Å—è —è–∫ {{ weather.main.feels_like|round|int }}¬∞C<br>
                            –í–æ–ª–æ–≥—ñ—Å—Ç—å: {{ weather.main.humidity }}%<br>
                            –¢–∏—Å–∫: {{ weather.main.pressure }} hPa
                        </small>
                    </div>
                {% else %}
                    <div class="text-center text-muted">
                        <p>‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ –ø—Ä–æ –ø–æ–≥–æ–¥—É</p>
                        <small>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API –∫–ª—é—á OpenWeatherMap</small>
                    </div>
                {% endif %}
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5>üîó –®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</h5>
            </div>
            <div class="card-body">
                <div class="list-group list-group-flush">
                    <a href="{{ url_for('test') }}" class="list-group-item list-group-item-action">
                        üß† –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
                    </a>
                    {% if session.user_id %}
                        <a href="{{ url_for('schedule') }}" class="list-group-item list-group-item-action">
                            üìÖ –ú—ñ–π —Ä–æ–∑–∫–ª–∞–¥
                        </a>
                        <a href="{{ url_for('tasks') }}" class="list-group-item list-group-item-action">
                            üìù –ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è
                        </a>
                    {% else %}
                        <a href="{{ url_for('login') }}" class="list-group-item list-group-item-action">
                            üîë –£–≤—ñ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                        </a>
                        <a href="{{ url_for('register') }}" class="list-group-item list-group-item-action">
                            üìù –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-12">
        <div class="card bg-light">
            <div class="card-body">
                <h3 class="text-center mb-4">‚ÑπÔ∏è –ü—Ä–æ —Å–∏—Å—Ç–µ–º—É</h3>
                <div class="row">
                    <div class="col-md-4">
                        <div class="text-center">
                            <h5>üìö –†–æ–∑–∫–ª–∞–¥ —É—Ä–æ–∫—ñ–≤</h5>
                            <p>–ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Ä–æ–∑–∫–ª–∞–¥ –∑–∞–Ω—è—Ç—å –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center">
                            <h5>üìù –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏</h5>
                            <p>–°—Ç–≤–æ—Ä—é–π—Ç–µ, –≤—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ —Ç–∞ –≤–∏–¥–∞–ª—è–π—Ç–µ –Ω–∞–≤—á–∞–ª—å–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center">
                            <h5>üß† –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è</h5>
                            <p>–ü—Ä–æ—Ö–æ–¥—å—Ç–µ —Ç–µ—Å—Ç–∏ —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–π—Ç–µ —Å–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
